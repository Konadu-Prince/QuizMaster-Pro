{"ast":null,"code":"import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import authService from'../../services/authService';// Async thunks\nexport const login=createAsyncThunk('auth/login',async(credentials,_ref)=>{let{rejectWithValue}=_ref;try{const response=await authService.login(credentials);return response.data;}catch(error){var _error$response,_error$response$data;return rejectWithValue(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Login failed');}});export const register=createAsyncThunk('auth/register',async(userData,_ref2)=>{let{rejectWithValue}=_ref2;try{const response=await authService.register(userData);return response.data;}catch(error){var _error$response2,_error$response2$data;return rejectWithValue(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Registration failed');}});export const logout=createAsyncThunk('auth/logout',async(_,_ref3)=>{let{rejectWithValue}=_ref3;try{await authService.logout();}catch(error){var _error$response3,_error$response3$data;return rejectWithValue(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||'Logout failed');}});const initialState={user:null,token:localStorage.getItem('token'),isAuthenticated:false,isLoading:false,error:null};const authSlice=createSlice({name:'auth',initialState,reducers:{clearError:state=>{state.error=null;},setCredentials:(state,action)=>{const{user,token}=action.payload;state.user=user;state.token=token;state.isAuthenticated=true;localStorage.setItem('token',token);},clearCredentials:state=>{state.user=null;state.token=null;state.isAuthenticated=false;localStorage.removeItem('token');}},extraReducers:builder=>{builder// Login\n.addCase(login.pending,state=>{state.isLoading=true;state.error=null;}).addCase(login.fulfilled,(state,action)=>{state.isLoading=false;state.user=action.payload.user;state.token=action.payload.token;state.isAuthenticated=true;localStorage.setItem('token',action.payload.token);}).addCase(login.rejected,(state,action)=>{state.isLoading=false;state.error=action.payload;})// Register\n.addCase(register.pending,state=>{state.isLoading=true;state.error=null;}).addCase(register.fulfilled,(state,action)=>{state.isLoading=false;state.user=action.payload.user;state.token=action.payload.token;state.isAuthenticated=true;localStorage.setItem('token',action.payload.token);}).addCase(register.rejected,(state,action)=>{state.isLoading=false;state.error=action.payload;})// Logout\n.addCase(logout.fulfilled,state=>{state.user=null;state.token=null;state.isAuthenticated=false;localStorage.removeItem('token');});}});export const{clearError,setCredentials,clearCredentials}=authSlice.actions;export default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","authService","login","credentials","_ref","rejectWithValue","response","data","error","_error$response","_error$response$data","message","register","userData","_ref2","_error$response2","_error$response2$data","logout","_","_ref3","_error$response3","_error$response3$data","initialState","user","token","localStorage","getItem","isAuthenticated","isLoading","authSlice","name","reducers","clearError","state","setCredentials","action","payload","setItem","clearCredentials","removeItem","extraReducers","builder","addCase","pending","fulfilled","rejected","actions","reducer"],"sources":["/workspace/frontend/src/store/slices/authSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport authService from '../../services/authService';\n\n// Async thunks\nexport const login = createAsyncThunk(\n  'auth/login',\n  async (credentials, { rejectWithValue }) => {\n    try {\n      const response = await authService.login(credentials);\n      return response.data;\n    } catch (error) {\n      return rejectWithValue(error.response?.data?.message || 'Login failed');\n    }\n  }\n);\n\nexport const register = createAsyncThunk(\n  'auth/register',\n  async (userData, { rejectWithValue }) => {\n    try {\n      const response = await authService.register(userData);\n      return response.data;\n    } catch (error) {\n      return rejectWithValue(error.response?.data?.message || 'Registration failed');\n    }\n  }\n);\n\nexport const logout = createAsyncThunk(\n  'auth/logout',\n  async (_, { rejectWithValue }) => {\n    try {\n      await authService.logout();\n    } catch (error) {\n      return rejectWithValue(error.response?.data?.message || 'Logout failed');\n    }\n  }\n);\n\nconst initialState = {\n  user: null,\n  token: localStorage.getItem('token'),\n  isAuthenticated: false,\n  isLoading: false,\n  error: null,\n};\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    clearError: (state) => {\n      state.error = null;\n    },\n    setCredentials: (state, action) => {\n      const { user, token } = action.payload;\n      state.user = user;\n      state.token = token;\n      state.isAuthenticated = true;\n      localStorage.setItem('token', token);\n    },\n    clearCredentials: (state) => {\n      state.user = null;\n      state.token = null;\n      state.isAuthenticated = false;\n      localStorage.removeItem('token');\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      // Login\n      .addCase(login.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(login.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.user = action.payload.user;\n        state.token = action.payload.token;\n        state.isAuthenticated = true;\n        localStorage.setItem('token', action.payload.token);\n      })\n      .addCase(login.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload;\n      })\n      // Register\n      .addCase(register.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(register.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.user = action.payload.user;\n        state.token = action.payload.token;\n        state.isAuthenticated = true;\n        localStorage.setItem('token', action.payload.token);\n      })\n      .addCase(register.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload;\n      })\n      // Logout\n      .addCase(logout.fulfilled, (state) => {\n        state.user = null;\n        state.token = null;\n        state.isAuthenticated = false;\n        localStorage.removeItem('token');\n      });\n  },\n});\n\nexport const { clearError, setCredentials, clearCredentials } = authSlice.actions;\nexport default authSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}